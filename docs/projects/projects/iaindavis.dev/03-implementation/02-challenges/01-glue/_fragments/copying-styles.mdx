import Expandable from '@site/src/components/Expandable/Expandable'

## Copying Styles
<Expandable>
    <div>

    Docusaurus does not rely on a static file for it's global CSS.
    Instead, it generates a new CSS file (with a new name) on each build.

    This makes rendering Storybook with styles that mirror the Docusaurus
    styles a bit of a challenge.

    The solution has been to add a [custom Docusaurus plugin][copy-styles-plugin] that runs
    after the build, and populates the styles in a known location with a
    stable name that Storybook stories can then import.

    [CopyStylesPlugin applied to the Docusaurus configuration][copy-styles-plugin-applied]

    ### Assumptions
    * Docusaurus global styles will always be a single CSS file

        :::caution
        This imposes a limitation on the build order. Docusaurus
        **must** build before Storybook.  For this reason, the preproduction and
        production builds have Storybook place its build output directly in
        the 'build' directory (as opposed to 'static' which would be the
        normal Docusaurus practice)
        :::

    </div>

</Expandable>

[copy-styles-plugin]: https://github.com/IainDavis/iaindavis.github.io/blob/main/src/buildUtils/docusaurus/postBuild/copyStylesPlugin.js "src/buildUtils/docusaurus/postBuild/copyStylesPlugin.js"
[copy-styles-plugin-applied]: https://github.com/IainDavis/iaindavis.github.io/blob/main/docusaurus.config.ts#L29-L31